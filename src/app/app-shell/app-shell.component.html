<mat-sidenav-container>
  <mat-sidenav #cartSideNav position="end" class="mat-typography shopping-cart">
    <div class="shopping-cart-header">
      <h2>Shopping Cart</h2>
    </div>
    <mat-divider></mat-divider>
    <div class="shopping-cart-content">
      <p *ngIf="(cart.content$ | async).items.length === 0">
        Your shopping cart is empty.
      </p>
      <mat-list>
        <mat-list-item *ngFor="let item of (cart.content$ | async).items">
          <p matLine>
            {{ item.title }}
          </p>
          <span class="price">
            {{ item.price | currency }}
          </span>
        </mat-list-item>
      </mat-list>
      <div class="shopping-cart-actions">
        <a [routerLink]="['/shopping-cart']" mat-button color="primary"
          >To cart</a
        >
        <button mat-raised-button color="primary">Checkout</button>
      </div>
    </div>
  </mat-sidenav>
  <mat-sidenav #drawer [mode]="drawerMode" class="mat-elevation-z8">
    <mat-nav-list>
      <mat-list-item
        [routerLink]="['/']"
        routerLinkActive="active"
        mat-button
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <mat-icon>dashboard</mat-icon>
        <span>Home</span>
      </mat-list-item>
      <mat-list-item
        mat-list-item
        [routerLink]="['/categories']"
        routerLinkActive="active"
        mat-button
      >
        <mat-icon>bookmarks</mat-icon>
        <span>Categories</span>
      </mat-list-item>
      <mat-list-item
        mat-list-item
        [routerLink]="['/books']"
        routerLinkActive="active"
        mat-button
      >
        <mat-icon>local_library</mat-icon>
        <span>Books</span>
      </mat-list-item>
      <mat-list-item
        mat-list-item
        [routerLink]="['/authors']"
        routerLinkActive="active"
        mat-button
      >
        <mat-icon>school</mat-icon>
        <span>Authors</span>
      </mat-list-item>
      <mat-list-item
        mat-list-item
        [routerLink]="['/shopping-cart']"
        routerLinkActive="active"
        mat-button
        *ngIf="user"
      >
        <mat-icon>shopping_cart</mat-icon>
        <span>Shopping Cart</span>
      </mat-list-item>
      <mat-list-item
        mat-list-item
        [routerLink]="['/orders']"
        routerLinkActive="active"
        mat-button
        *ngIf="user"
      >
        <mat-icon>description</mat-icon>
        <span>My Orders</span>
      </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="toolbar">
      <mat-toolbar color="primary" class="mat-elevation-z4">
        <button
          class="hamburger"
          mat-icon-button
          (click)="drawer.toggle()"
          [ngClass]="{ hidden: !shouldRenderDrawer }"
        >
          <mat-icon>menu</mat-icon>
        </button>
        <h1>Bookworm</h1>
        <span *ngIf="!shouldRenderDrawer">
          <a [routerLink]="['/home/']" routerLinkActive="active" mat-button
            >Home</a
          >
          <a [routerLink]="['/categories']" routerLinkActive="active" mat-button
            >Categories</a
          >
          <a [routerLink]="['/books']" routerLinkActive="active" mat-button
            >Books</a
          >
          <a [routerLink]="['/authors']" routerLinkActive="active" mat-button
            >Authors</a
          >
          <a [routerLink]="['/orders']" routerLinkActive="active" mat-button
            >My Orders</a
          >
        </span>
        <span class="spacer"></span>
        <button mat-icon-button style="margin-right: 4px">
          <mat-icon
            [matBadge]="(cart.content$ | async).items.length"
            matBadgeColor="accent"
            (click)="cartSideNav.open()"
            >shopping_cart</mat-icon
          >
        </button>
        <button mat-icon-button [matMenuTriggerFor]="accountMenu">
          <mat-icon>account_circle</mat-icon>
        </button>
        <mat-menu #accountMenu="matMenu">
          <a [routerLink]="['/login']" mat-menu-item *ngIf="!user">
            <mat-icon>input</mat-icon>
            <span>Sign in</span>
          </a>
          <a [routerLink]="['/profile']" mat-menu-item *ngIf="user">
            <mat-icon>account_box</mat-icon>
            <span>Profile</span>
          </a>
          <button mat-menu-item (click)="onLogoutClicked()" *ngIf="user">
            <mat-icon>exit_to_app</mat-icon>
            <span>Sign out</span>
          </button>
        </mat-menu>
      </mat-toolbar>
      <mat-progress-bar
        mode="indeterminate"
        *ngIf="isLoading"
      ></mat-progress-bar>
    </div>
    <section class="content">
      <div class="route-wrapper">
        <router-outlet></router-outlet>
      </div>
    </section>
  </mat-sidenav-content>
</mat-sidenav-container>
